<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CivicLearn ‚Äì Checkout</title>

  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/checkout.css">
 <style> 

.checkout-header .lang-switch {
  display: flex;
  gap: 8px;
  align-items: center;
}

.checkout-header .lang-switch button {
  min-width: 38px;
  height: 32px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid #d8d6e3;
  background: #f6f5fb;
  color: #2d2b38;
  font-family: inherit;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.checkout-header .lang-switch button:hover {
  background: #edeafc;
  border-color: #c8c3f5;
}

.checkout-header .lang-switch button.active {
  background: #6b4eff;
  color: #fff;
  border-color: #6b4eff;
  box-shadow: 0 4px 12px rgba(107, 78, 255, 0.25);
}
 </style> 

</head>

<body>

<header class="checkout-header">
  <div class="checkout-header-inner">

    <div class="checkout-brand">
      <img src="/assets/images/lt.svg" alt="Lithuania">
      <span data-t="brand_title"></span>
    </div>

    <div class="checkout-right">
      <div class="lang-switch">
        <button data-lang="lt">LT</button>
        <button data-lang="en">EN</button>
        <button data-lang="ru">RU</button>
      </div>
  
    </div>

  </div>
</header>

<main>
  <div class="layout">

    <!-- LEFT CARD -->
    <aside class="features">
      <h2 data-t="plan_title"></h2>
      <div class="price" data-t="plan_price"></div>
      <div class="once" data-t="plan_once"></div>

      <div class="divider"></div>

      <h3 data-t="included_title"></h3>

      <ul class="benefits">
        <li data-t="benefit_1"></li>
        <li data-t="benefit_2"></li>
        <li data-t="benefit_3"></li>
        <li data-t="benefit_4"></li>
        <li data-t="benefit_5"></li>
        <li data-t="benefit_6"></li>
        <li data-t="benefit_7"></li>
        <li data-t="benefit_8"></li>
        <li data-t="benefit_9"></li>
        <li data-t="benefit_10"></li>
        <li data-t="benefit_11"></li>
        <li data-t="benefit_12"></li>
      </ul>

      <p class="recommend" data-t="social_proof"></p>
    </aside>

    <!-- RIGHT CARD -->
    <section class="right">
      <div class="checkout-card">

        <h1 data-t="checkout_title"></h1>
        <div class="secure-line" data-t="secure_line"></div>

        <div class="checkout-flow">

          <!-- STEP 1 -->
          <div class="checkout-step" id="stepInitial">
            <button class="pay-btn" id="startCheckout" data-t="cta_start"></button>
            <p class="small-note" data-t="note_redirect"></p>
          </div>

          <!-- STEP 2 -->
          <div class="checkout-step" id="stepEmail" hidden>
            <p class="email-instructions" data-t="email_instruction"></p>

    <div class="email-field-group">
  <label for="checkoutEmail" data-t="email_label"></label>
  <input
    id="checkoutEmail"
    type="email"
    placeholder="you@example.com"
    autocomplete="email"
  />
</div>


            <button class="pay-btn" id="continueWithEmail" data-t="cta_continue"></button>
          </div>

          <!-- STEP 3 -->
          <div class="checkout-step" id="stepConfirm" hidden>
            <p data-t="confirm_text"></p>
            <p class="email-display" id="emailDisplay"></p>
            <p class="confirm-warning" data-t="confirm_warning"></p>

            <div class="confirm-actions">
              <button class="pay-btn" id="confirmEmail" data-t="cta_confirm"></button>
              <button class="link-btn" id="editEmail" data-t="cta_edit"></button>
            </div>
          </div>

          <div id="checkoutMessage" class="checkout-message"></div>
        </div>

        <div class="trust">
          <div>üîí <span data-t="trust_secure"></span></div>
          <div>‚ö° <span data-t="trust_instant"></span></div>
          <div>‚úî <span data-t="trust_no_sub"></span></div>
        </div>

        <div class="after-text">
          <span data-t="already_account"></span>
          <a href="/lt/login.html" data-t="login_link"></a>
        </div>

      </div>
    </section>

  </div>
</main>

<!-- =========================
     I18N DICTIONARY
========================= -->
<script>
const I18N = {
  lt: {
    brand_title: "CivicLearn Lietuva ‚Äì Pilietybƒós egzaminas",

    plan_title: "Premium prieiga",
    plan_price: "29 EUR",
    plan_once: "Vienkartinis mokƒójimas ¬∑ neribota prieiga",

    included_title: "Kas ƒØskaiƒçiuota",
    benefit_1: "I≈°sam≈´s praktikos klausimai pagal Lietuvos KonstitucijƒÖ",
    benefit_2: "Valstybƒós sandara, teisƒós, pareigos ir institucijos",
    benefit_3: "Trumpi, fokusuoti kartojimo testai (5‚Äì10 minuƒçi≈≥)",
    benefit_4: "Automatinis sudƒóting≈≥ klausim≈≥ sugrupavimas",
    benefit_5: "Pa≈æangos stebƒójimas pagal temas",
    benefit_6: "I≈°sami statistika ir rezultat≈≥ ap≈ævalga",
    benefit_7: "Vis≈≥ sprƒôst≈≥ test≈≥ istorija",
    benefit_8: "Kasdieniai mokymosi priminimai",
    benefit_9: "Optimizuota telefonui, plan≈°etei ir kompiuteriui",
    benefit_10: "Momentinƒó prieiga po apmokƒójimo",
    benefit_11: "Nemokami turinio atnaujinimai",
    benefit_12: "Nƒóra prenumeratos ‚Äì tik vienkartinis mokƒójimas",

    social_proof: "Naudoja kandidatai, besiruo≈°iantys Lietuvos pilietybƒós egzaminui.",

    checkout_title: "Aktyvuokite Premium prieigƒÖ",
    secure_line: "100 % saugus mokƒójimas per Stripe",

    cta_start: "Tƒôsti prie saugaus mokƒójimo",
    note_redirect: "B≈´site nukreipti ƒØ Stripe, kad u≈æbaigtumƒóte mokƒójimƒÖ.",

    email_instruction: "ƒÆveskite el. pa≈°to adresƒÖ, kuris bus naudojamas paskyrai.",
    email_label: "El. pa≈°tas",
    cta_continue: "Tƒôsti",

    confirm_text: "Paskyra bus sukurta naudojant ≈°ƒØ el. pa≈°to adresƒÖ:",
    confirm_warning: "Patikrinkite atid≈æiai ‚Äì prisijungimo nuoroda bus i≈°si≈≥sta ≈°iuo adresu.",
    cta_confirm: "Taip, tƒôsti prie saugaus mokƒójimo",
    cta_edit: "Keisti el. pa≈°tƒÖ",

    trust_secure: "Saugus mokƒójimas",
    trust_instant: "Momentinƒó prieiga",
    trust_no_sub: "Be prenumeratos",

    already_account: "Jau turite paskyrƒÖ?",
    login_link: "Prisijunkite ƒçia",

    msg_enter_email: "ƒÆveskite el. pa≈°to adresƒÖ.",
    msg_invalid_email: "Neteisingas el. pa≈°to adresas.",
    msg_connecting: "Jungiama prie Stripe. Pra≈°ome palaukti‚Ä¶",
    msg_error: "ƒÆvyko klaida. Bandykite dar kartƒÖ."
  },

  en: {
    brand_title: "CivicLearn Lithuania ‚Äì Citizenship test",

    plan_title: "Premium access",
    plan_price: "29 EUR",
    plan_once: "One-time payment ¬∑ unlimited access",

    included_title: "What‚Äôs included",
    benefit_1: "Practice questions based on the Lithuanian Constitution",
    benefit_2: "State structure, rights, duties and institutions",
    benefit_3: "Short, focused revision tests (5‚Äì10 minutes)",
    benefit_4: "Automatic grouping of difficult questions",
    benefit_5: "Progress tracking by topic",
    benefit_6: "Detailed statistics and results overview",
    benefit_7: "Full history of completed tests",
    benefit_8: "Daily study reminders",
    benefit_9: "Optimized for phone, tablet and desktop",
    benefit_10: "Instant access after payment",
    benefit_11: "Free content updates",
    benefit_12: "No subscription ‚Äì one-time payment",

    social_proof: "Used by candidates preparing for the Lithuanian citizenship test.",

    checkout_title: "Activate Premium access",
    secure_line: "100% secure payment via Stripe",

    cta_start: "Continue to secure payment",
    note_redirect: "You will be redirected to Stripe to complete payment.",

    email_instruction: "Enter the email address to be used for your account.",
    email_label: "Email",
    cta_continue: "Continue",

    confirm_text: "Your account will be created using this email address:",
    confirm_warning: "Please check carefully. The login link will be sent to this address.",
    cta_confirm: "Yes, continue to secure payment",
    cta_edit: "Edit email",

    trust_secure: "Secure payment",
    trust_instant: "Instant access",
    trust_no_sub: "No subscription",

    already_account: "Already have an account?",
    login_link: "Log in here",

    msg_enter_email: "Please enter your email address.",
    msg_invalid_email: "Invalid email address.",
    msg_connecting: "Connecting to Stripe. Please wait‚Ä¶",
    msg_error: "An error occurred. Please try again."
  },

  ru: {
    brand_title: "CivicLearn –õ–∏—Ç–≤–∞ ‚Äì –≠–∫–∑–∞–º–µ–Ω –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ",

    plan_title: "–ü—Ä–µ–º–∏—É–º-–¥–æ—Å—Ç—É–ø",
    plan_price: "29 EUR",
    plan_once: "–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂ ¬∑ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø",

    included_title: "–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ",
    benefit_1: "400 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–∏ –õ–∏—Ç–≤—ã",
    benefit_2: "–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –ø—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏",
    benefit_3: "–ö–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (5‚Äì10 –º–∏–Ω—É—Ç)",
    benefit_4: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–±–æ—Ä–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤",
    benefit_5: "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —Ç–µ–º–∞–º",
    benefit_6: "–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã",
    benefit_7: "–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤",
    benefit_8: "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è",
    benefit_9: "–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –ø–ª–∞–Ω—à–µ—Ç–µ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ",
    benefit_10: "–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã",
    benefit_11: "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
    benefit_12: "–ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –æ–¥–∏–Ω –ø–ª–∞—Ç–µ–∂",

    social_proof: "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏, –≥–æ—Ç–æ–≤—è—â–∏–º–∏—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω—É –Ω–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –õ–∏—Ç–≤—ã.",

    checkout_title: "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º-–¥–æ—Å—Ç—É–ø",
    secure_line: "100% –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Stripe",

    cta_start: "–ü–µ—Ä–µ–π—Ç–∏ –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–ø–ª–∞—Ç–µ",
    note_redirect: "–í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Stripe –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã.",

    email_instruction: "–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –¥–ª—è –≤–∞—à–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.",
    email_label: "–≠–ª. –ø–æ—á—Ç–∞",
    cta_continue: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",

    confirm_text: "–£—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ —Å —ç—Ç–∏–º –∞–¥—Ä–µ—Å–æ–º:",
    confirm_warning: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ ‚Äî —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—é–¥–∞.",
    cta_confirm: "–î–∞, –ø–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ",
    cta_edit: "–ò–∑–º–µ–Ω–∏—Ç—å email",

    trust_secure: "–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞",
    trust_instant: "–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø",
    trust_no_sub: "–ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏",

    already_account: "–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?",
    login_link: "–í–æ–π—Ç–∏",

    msg_enter_email: "–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.",
    msg_invalid_email: "–ù–µ–≤–µ—Ä–Ω—ã–π –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.",
    msg_connecting: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Stripe. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ‚Ä¶",
    msg_error: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."
  }
};
</script>

<!-- =========================
     I18N ENGINE
========================= -->
<script>
let currentLang = "lt";

function applyLang(lang) {
  currentLang = lang;
  document.documentElement.lang = lang;

  document.querySelectorAll(".lang-switch button").forEach(btn => {
    btn.classList.toggle("active", btn.dataset.lang === lang);
  });

  document.querySelectorAll("[data-t]").forEach(el => {
    const key = el.getAttribute("data-t");
    if (I18N[lang][key]) el.textContent = I18N[lang][key];
  });
}

document.querySelectorAll(".lang-switch button").forEach(btn => {
  btn.addEventListener("click", () => applyLang(btn.dataset.lang));
});

applyLang(currentLang);
</script>

<!-- =========================
     CHECKOUT LOGIC (UNCHANGED)
========================= -->
<script>
(function () {
  const stepInitial = document.getElementById("stepInitial");
  const stepEmail = document.getElementById("stepEmail");
  const stepConfirm = document.getElementById("stepConfirm");

  const startBtn = document.getElementById("startCheckout");
  const continueBtn = document.getElementById("continueWithEmail");
  const confirmBtn = document.getElementById("confirmEmail");
  const editBtn = document.getElementById("editEmail");

  const emailInput = document.getElementById("checkoutEmail");
  const emailDisplay = document.getElementById("emailDisplay");
  const msgBox = document.getElementById("checkoutMessage");

  let currentEmail = "";

  function showMessage(type, text) {
    msgBox.className = "checkout-message " + type;
    msgBox.textContent = text;
    msgBox.style.display = "block";
  }

  function validateEmail(val) {
    const email = val.trim();
    if (!email) return { ok: false, msg: I18N[currentLang].msg_enter_email };
    if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)) {
      return { ok: false, msg: I18N[currentLang].msg_invalid_email };
    }
    return { ok: true, email };
  }

  startBtn.onclick = () => {
    stepInitial.hidden = true;
    stepEmail.hidden = false;
    emailInput.focus();
  };

  continueBtn.onclick = () => {
    const res = validateEmail(emailInput.value);
    if (!res.ok) return showMessage("error", res.msg);
    currentEmail = res.email;
    emailDisplay.textContent = currentEmail;
    stepEmail.hidden = true;
    stepConfirm.hidden = false;
  };

  editBtn.onclick = () => {
    stepConfirm.hidden = true;
    stepEmail.hidden = false;
  };

  confirmBtn.onclick = async () => {
    showMessage("info", I18N[currentLang].msg_connecting);

    try {
      const r = await fetch("https://payments.civiclearn.com/create-checkout-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          email: currentEmail,
          product: "lt-citizenship-premium"
        })
      });

      if (!r.ok) throw new Error();
      const data = await r.json();
      window.location.href = data.url;

    } catch {
      showMessage("error", I18N[currentLang].msg_error);
    }
  };
})();
</script>

</body>
</html>
